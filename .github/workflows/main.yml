name: CI Pipeline

on:
  push:
    branches:
      - "**" # all branches
  pull_request:
    branches:
      - "**" # all PRs (to any branch)

permissions:
  contents: write

jobs:
  git:
    if: github.event_name == 'pull_request' || (github.event_name == 'push' && github.event.pull_request == null)
    uses: ./.github/workflows/git.yml

  build:
    needs: git
    uses: ./.github/workflows/build.yml

  release:
    needs: [git, build]
    uses: ./.github/workflows/release.yml
